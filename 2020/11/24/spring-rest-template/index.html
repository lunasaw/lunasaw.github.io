

<!DOCTYPE html>
<html lang="ZH-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicon.ico">
  <link rel="icon" href="/img/favicon.ico">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="">
  <meta name="author" content="luna">
  <meta name="keywords" content="åšå®¢,luna,java,spring,utils,linux,idea">
  <meta name="description" content="æŒæ¡ Spring ä¹‹ RestTemplateå‰è¨€åœ¨ Java æœåŠ¡ç«¯å¼€å‘é¢†åŸŸé‡Œï¼ŒSpring æ˜¯ç»•ä¸å¼€çš„è¯é¢˜ï¼Œå°¤å…¶æ˜¯ç°åœ¨å¾®æœåŠ¡æ¦‚å¿µç››è¡Œï¼ŒSpring Boot çš„å‡ºç°æ›´æ˜¯ç»™ Spring æ³¨å…¥äº†æ–°çš„æ´»åŠ›ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰ Spring Cloudï¼Œè¿™äº›æ¡†æ¶è®© Spring æŠ€æœ¯ä½“ç³»æ›´åŠ ä¸°å¯Œã€‚Spring ä» 2014 å¹´çš„ 1.0.0 ç‰ˆæœ¬è¿­ä»£åˆ° ç°åœ¨çš„ 5.2.0 M1 ç‰ˆæœ¬ï¼Œç´§éšç€ Java">
<meta property="og:type" content="article">
<meta property="og:title" content="spring RestTemplate">
<meta property="og:url" content="https://lunasaw.github.io/2020/11/24/spring-rest-template/index.html">
<meta property="og:site_name" content="åå¹³æ–¹ç±³å°å±‹">
<meta property="og:description" content="æŒæ¡ Spring ä¹‹ RestTemplateå‰è¨€åœ¨ Java æœåŠ¡ç«¯å¼€å‘é¢†åŸŸé‡Œï¼ŒSpring æ˜¯ç»•ä¸å¼€çš„è¯é¢˜ï¼Œå°¤å…¶æ˜¯ç°åœ¨å¾®æœåŠ¡æ¦‚å¿µç››è¡Œï¼ŒSpring Boot çš„å‡ºç°æ›´æ˜¯ç»™ Spring æ³¨å…¥äº†æ–°çš„æ´»åŠ›ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰ Spring Cloudï¼Œè¿™äº›æ¡†æ¶è®© Spring æŠ€æœ¯ä½“ç³»æ›´åŠ ä¸°å¯Œã€‚Spring ä» 2014 å¹´çš„ 1.0.0 ç‰ˆæœ¬è¿­ä»£åˆ° ç°åœ¨çš„ 5.2.0 M1 ç‰ˆæœ¬ï¼Œç´§éšç€ Java">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://lunasaw.github.io/img/springrest/1.jpg">
<meta property="og:image" content="https://lunasaw.github.io/img/springrest/2.jpg">
<meta property="og:image" content="https://lunasaw.github.io/img/springrest/3.jpg">
<meta property="og:image" content="https://lunasaw.github.io/img/springrest/4.jpg">
<meta property="og:image" content="https://lunasaw.github.io/img/springrest/5.jpg">
<meta property="article:published_time" content="2020-11-23T16:00:00.000Z">
<meta property="article:modified_time" content="2022-09-16T02:41:51.995Z">
<meta property="article:author" content="luna">
<meta property="article:tag" content="RestTemplate">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://lunasaw.github.io/img/springrest/1.jpg">
  
    <canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas><script type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script>
  
  <title>spring RestTemplate - åå¹³æ–¹ç±³å°å±‹</title>

  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@10.4.0/styles/idea.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
  


<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->


  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"lunasaw.github.io","root":"/","version":"1.8.12","typing":{"enable":true,"typeSpeed":65,"cursorChar":"_","loop":false},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":"#"},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":true,"trickleSpeed":100}},"copy_btn":true,"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"1WlABYJFX3ooWNnixAEsUHg2-gzGzoHsz","app_key":"4HAsQYXea2QPsxkF5wOFFpbH","server_url":"https://cn-n1-cell1.leancloud.cn","path":"window.location.pathname"}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 40vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>åå¹³æ–¹ç±³å°å±‹</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-link-fill"></i>
                é“¾æ¥
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner" id="banner" parallax=true
         style="background: url('/img/basic/spring-binner.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.2)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="spring RestTemplate">
              
            </span>

            
              <div class="mt-3">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-author" aria-hidden="true"></i>
      luna
    </span>
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2020-11-24 00:00" pubdate>
        2020å¹´11æœˆ24æ—¥ å‡Œæ™¨
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      17k å­—
    </span>
  

  
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      54 åˆ†é’Ÿ
    </span>
  

  
  
    
      <!-- LeanCloud ç»Ÿè®¡æ–‡ç« PV -->
      <span id="leancloud-page-views-container" class="post-meta" style="display: none">
        <i class="iconfont icon-eye" aria-hidden="true"></i>
        <span id="leancloud-page-views"></span> æ¬¡
      </span>
    
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">spring RestTemplate</h1>
            
              <p class="note note-info">
                
                  æœ¬æ–‡æœ€åæ›´æ–°äºï¼š10 å¤©å‰
                
              </p>
            
            <div class="markdown-body">
              <h1 id="æŒæ¡-Spring-ä¹‹-RestTemplate"><a href="#æŒæ¡-Spring-ä¹‹-RestTemplate" class="headerlink" title="æŒæ¡ Spring ä¹‹ RestTemplate"></a>æŒæ¡ Spring ä¹‹ RestTemplate</h1><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ Java æœåŠ¡ç«¯å¼€å‘é¢†åŸŸé‡Œï¼ŒSpring æ˜¯ç»•ä¸å¼€çš„è¯é¢˜ï¼Œå°¤å…¶æ˜¯ç°åœ¨å¾®æœåŠ¡æ¦‚å¿µç››è¡Œï¼ŒSpring Boot çš„å‡ºç°æ›´æ˜¯ç»™ Spring æ³¨å…¥äº†æ–°çš„æ´»åŠ›ï¼Œé™¤æ­¤ä¹‹å¤–è¿˜æœ‰ Spring Cloudï¼Œè¿™äº›æ¡†æ¶è®© Spring æŠ€æœ¯ä½“ç³»æ›´åŠ ä¸°å¯Œã€‚Spring ä» 2014 å¹´çš„ 1.0.0 ç‰ˆæœ¬è¿­ä»£åˆ° ç°åœ¨çš„ 5.2.0 M1 ç‰ˆæœ¬ï¼Œç´§éšç€ Java è¯­è¨€å‘å±•ï¼Œä¸æ–­å¼•å…¥æ–°çš„ç‰¹æ€§å’ŒåŠŸèƒ½ã€‚æœ¬æ–‡å…³æ³¨çš„æ˜¯ Spring æ¡†æ¶ä¸­ <code>RestTemplate</code> å†…å®¹ï¼Œå¯ä»¥å‡å°‘æˆ‘ä»¬å¹³æ—¶å¼€å‘å¸¸ä½¿ç”¨çš„ <code>HttpClient</code> API ä¾èµ–ã€‚æ–‡ç« æ‰€æ¶‰åŠçš„ç¤ºä¾‹ Demo è¯¦è§Github åœ°å€ï¼š<a target="_blank" rel="noopener" href="https://github.com/wrcj12138aaa/resttemplate/tree/master">Resttemplate demo</a> ã€‚æ„Ÿè°¢å°ä¸ƒåŒå­¦çš„è®¤çœŸæ ¡å¯¹ï¼Œå¦‚æœæœ‰ä»»ä½•æŠ€æœ¯é—®é¢˜æˆ–è€…æ–‡ç« çº°æ¼ï¼Œæ¬¢è¿ç•™è¨€è”ç³»ï¼Œä¸€èµ·äº¤æµæ¢è®¨ ğŸ˜ã€‚</p>
<h2 id="è®¤è¯†-RestTemplate"><a href="#è®¤è¯†-RestTemplate" class="headerlink" title="è®¤è¯† RestTemplate"></a>è®¤è¯† <code>RestTemplate</code></h2><p>é¦–å…ˆåœ¨æˆ‘ä»¬å­¦ä¹ ä½¿ç”¨ <code>RestTemplate</code> ä¹‹å‰ï¼Œå…ˆè®¤è¯†ä¸‹è¿™ä¸ªç±»ï¼Œæ¥çœ‹ Spring å®˜æ–¹æ€ä¹ˆæè¿°çš„ã€‚ ä»å®˜æ–¹ API æ–‡æ¡£ <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestTemplate.html">RestTemplate javadoc</a> å¯ä»¥æ‰¾è¯¥ç±»çš„æè¿°å¦‚ä¸‹ï¼š</p>
<blockquote>
<p>Synchronous client to perform HTTP requests, exposing a simple, template method API over underlying HTTP client libraries such as the JDK HttpURLConnection, Apache HttpComponents, and others. The RestTemplate offers templates for common scenarios by HTTP method, in addition to the generalized exchange and execute methods that support of less frequent cases.</p>
</blockquote>
<p>ä»è¿™é‡Œå¯ä»¥æ¸…æ¥šåœ°äº†è§£åˆ° <code>RestTemplate</code> é‡‡ç”¨åŒæ­¥æ–¹å¼æ‰§è¡Œ HTTP è¯·æ±‚çš„ç±»ï¼Œåº•å±‚ä½¿ç”¨ JDK åŸç”Ÿ <code>HttpURLConnection</code> API ï¼Œæˆ–è€… <code>HttpComponents</code>ç­‰å…¶ä»– HTTP å®¢æˆ·ç«¯è¯·æ±‚ç±»åº“ã€‚è¿˜æœ‰ä¸€å¤„å¼ºè°ƒçš„å°±æ˜¯ <code>RestTemplate</code> æä¾›æ¨¡æ¿åŒ–çš„æ–¹æ³•è®©å¼€å‘è€…èƒ½æ›´ç®€å•åœ°å‘é€ HTTP è¯·æ±‚ã€‚</p>
<p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ<code>RestTemplate</code> ç±»æ˜¯åœ¨ Spring Framework 3.0 å¼€å§‹å¼•å…¥çš„ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨çš„ Spring ç‰ˆæœ¬ä¸ºå½“å‰æœ€æ–°çš„ GA ç‰ˆæœ¬ 5.1.6ã€‚è€Œåœ¨ 5.0 ä»¥ä¸Šï¼Œå®˜æ–¹æ ‡æ³¨äº†æ›´æ¨èä½¿ç”¨éé˜»å¡çš„å“åº”å¼ HTTP è¯·æ±‚å¤„ç†ç±» <code>org.springframework.web.reactive.client.WebClient</code> æ¥æ›¿ä»£ <code>RestTemplate</code>ï¼Œå°¤å…¶æ˜¯å¯¹åº”å¼‚æ­¥è¯·æ±‚å¤„ç†çš„åœºæ™¯ä¸Š ã€‚</p>
<p>è¿™é‡Œæˆ‘ä»¬å…ˆç®€å•æ€»ç»“ä¸‹ä»€ä¹ˆæ˜¯ <code>RestTemplate</code> ï¼š <code>RestTemplate</code> å°±æ˜¯ Spring å°è£…çš„å¤„ç†åŒæ­¥ HTTP è¯·æ±‚çš„ç±»ã€‚å…·ä½“å¦‚ä½•ä½¿ç”¨è¿™ä¸ªç±»è¿›è¡Œ HTTP è¯·æ±‚æ“ä½œï¼Œå¯è§æ–‡ç« çš„å®æˆ˜éƒ¨åˆ†ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬çœ‹ä¸‹ <code>RestTemplate</code> ç±»æä¾›çš„ API æœ‰å“ªäº›,<code>RestTemplate</code> æä¾›äº†å°†è¿‘ 30 ä¸ªè¯·æ±‚æ–¹æ³•ï¼Œå…¶ä¸­å¤šæ•°æ˜¯å•ä¸ªæ–¹æ³•é‡è½½å®ç°ï¼Œè¿™é‡Œæˆ‘ä¸»è¦å‚è€ƒå®˜æ–¹æ–‡æ¡£ <a target="_blank" rel="noopener" href="https://docs.spring.io/spring/docs/5.1.6.RELEASE/spring-framework-reference/integration.html#rest-client-access">rest-client-access</a> è¿›è¡Œå¦‚ä¸‹åˆ†ç±»ï¼š</p>
<table>
<thead>
<tr>
<th>æ–¹æ³•å</th>
<th>æè¿°</th>
</tr>
</thead>
<tbody><tr>
<td><code>getForObject</code></td>
<td>é€šè¿‡ GET è¯·æ±‚è·å¾—å“åº”ç»“æœ</td>
</tr>
<tr>
<td><code>getForEntity</code></td>
<td>é€šè¿‡ GET è¯·æ±‚è·å– <code>ResponseEntity</code> å¯¹è±¡ï¼ŒåŒ…å®¹æœ‰çŠ¶æ€ç ï¼Œå“åº”å¤´å’Œå“åº”æ•°æ®</td>
</tr>
<tr>
<td><code>headForHeaders</code></td>
<td>ä»¥ HEAD è¯·æ±‚èµ„æºè¿”å›æ‰€æœ‰å“åº”å¤´ä¿¡æ¯</td>
</tr>
<tr>
<td><code>postForLocation</code></td>
<td>ç”¨ POST è¯·æ±‚åˆ›å»ºèµ„æºï¼Œå¹¶è¿”å›å“åº”æ•°æ®ä¸­å“åº”å¤´çš„å­—æ®µ <code>Location</code> çš„æ•°æ®</td>
</tr>
<tr>
<td><code>postForObject</code></td>
<td>é€šè¿‡ POST è¯·æ±‚åˆ›å»ºèµ„æºï¼Œè·å¾—å“åº”ç»“æœ</td>
</tr>
<tr>
<td><code>put</code></td>
<td>é€šè¿‡ PUT æ–¹å¼è¯·æ±‚æ¥åˆ›å»ºæˆ–è€…æ›´æ–°èµ„æº</td>
</tr>
<tr>
<td><code>patchForObject</code></td>
<td>é€šè¿‡ PATH æ–¹å¼è¯·æ±‚æ¥æ›´æ–°èµ„æºï¼Œå¹¶è·å¾—å“åº”ç»“æœã€‚(JDK <code>HttpURLConnection</code> ä¸æ”¯æŒ PATH æ–¹å¼è¯·æ±‚ï¼Œå…¶ä»– HTTP å®¢æˆ·ç«¯åº“æ”¯æŒ)</td>
</tr>
<tr>
<td><code>delete</code></td>
<td>é€šè¿‡ DELETE æ–¹å¼åˆ é™¤èµ„æº</td>
</tr>
<tr>
<td><code>optionsForAllow</code></td>
<td>é€šè¿‡ ALLOW æ–¹å¼è¯·æ±‚æ¥è·å¾—èµ„æºæ‰€å…è®¸è®¿é—®çš„æ‰€æœ‰ HTTP æ–¹æ³•ï¼Œå¯ç”¨çœ‹æŸä¸ªè¯·æ±‚æ”¯æŒå“ªäº›è¯·æ±‚æ–¹å¼</td>
</tr>
<tr>
<td><code>exchange</code></td>
<td>æ›´é€šç”¨ç‰ˆæœ¬çš„è¯·æ±‚å¤„ç†æ–¹æ³•ï¼Œæ¥å—ä¸€ä¸ª <code>RequestEntity</code> å¯¹è±¡ï¼Œå¯ä»¥è®¾ç½®è·¯å¾„ï¼Œè¯·æ±‚å¤´ï¼Œè¯·æ±‚ä¿¡æ¯ç­‰ï¼Œæœ€åè¿”å›ä¸€ä¸ª <code>ResponseEntity</code> å®ä½“</td>
</tr>
<tr>
<td><code>execute</code></td>
<td>æœ€é€šç”¨çš„æ‰§è¡Œ HTTP è¯·æ±‚çš„æ–¹æ³•ï¼Œä¸Šé¢æ‰€æœ‰æ–¹æ³•éƒ½æ˜¯åŸºäº <code>execute</code> çš„å°è£…ï¼Œå…¨é¢æ§åˆ¶è¯·æ±‚ä¿¡æ¯ï¼Œå¹¶é€šè¿‡å›è°ƒæ¥å£è·å¾—å“åº”æ•°æ®</td>
</tr>
</tbody></table>
<p>çœ‹åˆ°é‚£ä¹ˆå¤šæ–¹æ³•ä¹Ÿè®°ä¸å…¨ï¼Œä¸ºäº†æ›´å¥½ç†è§£ï¼Œå¯ä»¥ç®€å•çœ‹ä¸‹ <code>RestTemplate</code> çš„ç±»å±‚çº§ä½“ç³»ï¼Œé€šè¿‡å®˜æ–¹æºä»£ç å°±èƒ½çœ‹åˆ°:</p>
<div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span>
<span class="hljs-comment"> * Interface specifying a basic set of RESTful operations.</span>
<span class="hljs-comment"> * Implemented by &#123;<span class="hljs-doctag">@link</span> RestTemplate&#125;. Not often used directly, but a useful</span>
<span class="hljs-comment"> * option to enhance testability, as it can easily be mocked or stubbed.</span>
<span class="hljs-comment"> *</span>
<span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Arjen Poutsma</span>
<span class="hljs-comment"> * <span class="hljs-doctag">@author</span> Juergen Hoeller</span>
<span class="hljs-comment"> * <span class="hljs-doctag">@since</span> 3.0</span>
<span class="hljs-comment"> * <span class="hljs-doctag">@see</span> RestTemplate</span>
<span class="hljs-comment"> */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">RestOperations</span> </span>&#123;
					    ...
&#125;
</code></pre></div>

<p>å…¶å® <code>RestTemplate</code> ç±»çš„è¯·æ±‚æ–¹æ³•éƒ½æ˜¯æ¥è‡ª <code>RestOperations</code> æ¥å£çš„ï¼Œæ ¹æ®è¿™ä¸ªåå­—å°±å¯ä»¥å¤§æ¦‚çŸ¥é“è¿™ä¸ªæ¥å£ä¸»è¦å°±æ˜¯æä¾›äº† RESTful è¯·æ±‚æ“ä½œçš„æ¥å£ï¼Œå¦‚ GETï¼ŒPOSTï¼ŒPUTï¼ŒDELETE ç­‰ï¼Œå…·ä½“ä¿¡æ¯å¯ä»¥å‚è§ <a target="_blank" rel="noopener" href="https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/web/client/RestOperations.html">RestOperation javadoc</a>ã€‚</p>
<p><img src="/img/springrest/1.jpg" srcset="/img/loading.gif" lazyload alt="RestTemplate ç±»å±‚æ¬¡å›¾"></p>
<blockquote>
<p>å…³äº RESTfulï¼š</p>
<p>æ¥è‡ªWikipedia å®šä¹‰ï¼š<strong>è¡¨ç°å±‚çŠ¶æ€è½¬æ¢</strong>ï¼Œä¸€ç§è®¾è®¡æä¾›ä¸‡ç»´ç½‘ç»œæœåŠ¡çš„<a target="_blank" rel="noopener" href="https://zh.wikipedia.org/wiki/%E8%BB%9F%E4%BB%B6%E6%9E%B6%E6%A7%8B">è½¯ä»¶æ„å»ºé£æ ¼</a>ï¼Œåˆç®€ç§°ä¸º RESTã€‚</p>
<p><strong>ç”¨ URL å®šä½èµ„æºï¼Œç”¨ HTTP åŠ¨è¯æè¿°æ“ä½œï¼Œå¦‚ GET,POST,DELETE,PUT</strong>ï¼Œç®€å•æ¥è¯´é€šè¿‡ URL å°±çŸ¥é“è®¿é—®ä»€ä¹ˆèµ„æºï¼Œé€šè¿‡ HTTP Method å°±çŸ¥é“æ‰§è¡Œä»€ä¹ˆæ“ä½œï¼Œé€šè¿‡ HTTP Status Code å°±çŸ¥é“æ‰§è¡Œç»“æœã€‚</p>
</blockquote>
<h2 id="å®æˆ˜-RestTemplate"><a href="#å®æˆ˜-RestTemplate" class="headerlink" title="å®æˆ˜ RestTemplate"></a>å®æˆ˜ <code>RestTemplate</code></h2><p>å¥½äº†ï¼Œç®€å•è®¤è¯†äº† <code>RestTemplate</code> ç±»ä¹‹åï¼Œæˆ‘ä»¬å…ˆç‰›åˆ€å°è¯•ï¼Œçœ‹çœ‹å¦‚ä½•ä¸Šæ‰‹ä½¿ç”¨ã€‚</p>
<h3 id="1-ç”Ÿæˆ-Demo-é¡¹ç›®ï¼Œå¯¼å…¥-IDE"><a href="#1-ç”Ÿæˆ-Demo-é¡¹ç›®ï¼Œå¯¼å…¥-IDE" class="headerlink" title="1. ç”Ÿæˆ Demo é¡¹ç›®ï¼Œå¯¼å…¥ IDE"></a>1. ç”Ÿæˆ Demo é¡¹ç›®ï¼Œå¯¼å…¥ IDE</h3><p>ä¸ºäº†èƒ½å¿«é€Ÿæ­å»ºä¸€ä¸ª Demoï¼Œæˆ‘ä»¬è¿™è¾¹ç”¨ Spring Boot æ¡†æ¶æ­å»ºï¼Œé¦–å…ˆç”¨å®˜æ–¹æä¾›çš„ <a target="_blank" rel="noopener" href="https://start.spring.io/">Spring Initializr</a> æ¥ç”Ÿæˆå¿«é€Ÿæ„å»ºé¡¹ç›®éª¨æ¶ï¼Œé€‰æ‹© Spring Boot ç‰ˆæœ¬ 2.1.4,å…¶åº•å±‚ä¾èµ–çš„ Spring Framework ç‰ˆæœ¬ä¸ºæœ€æ–°å‘å¸ƒç‰ˆæœ¬ 5.1.6ï¼Œå¯¹äº POM ä¾èµ–åªé€‰æ‹©ä¸€ä¸ª Web æ¨¡å—å³å¯ï¼Œè¿™æ ·ä¾¿äºå¿«é€Ÿæ­å»º Web åº”ç”¨ã€‚</p>
<p><img src="/img/springrest/2.jpg" srcset="/img/loading.gif" lazyload alt="spring initializr"></p>
<p>ç‚¹å‡»ç”Ÿæˆå·¥ç¨‹æŒ‰é’®ï¼Œå°±å¯ä»¥ä¸‹è½½åˆ°é¡¹ç›®çš„å‹ç¼©åŒ…ï¼Œè§£å‹åç”¨è‡ªå·±å¸¸ç”¨çš„ IDE å¯¼å…¥é¡¹ç›®ï¼Œé¡¹ç›®ç»“æ„æ•´ç†å¦‚ä¸‹ï¼š</p>
<p><img src="/img/springrest/3.jpg" srcset="/img/loading.gif" lazyload alt="é¡¹ç›®éª¨æ¶"></p>
<p>é¡¹ç›®ä¸­ <code>ResttemplateApplication.java</code> ä¸ºæ•´ä¸ªç¨‹åºçš„å¼•å¯¼ç±»ï¼Œç”¨äºå¯åŠ¨é¡¹ç›®ã€‚</p>
<h3 id="2-ç¼–å†™è¯·æ±‚æ§åˆ¶å™¨ç±»-ProductController"><a href="#2-ç¼–å†™è¯·æ±‚æ§åˆ¶å™¨ç±»-ProductController" class="headerlink" title="2. ç¼–å†™è¯·æ±‚æ§åˆ¶å™¨ç±» ProductController"></a>2. ç¼–å†™è¯·æ±‚æ§åˆ¶å™¨ç±» ProductController</h3><p>é¦–å…ˆä¸ºäº†èƒ½å¤Ÿä½¿ç”¨ <code>RestTemplate</code> å‘é€å¤šç§æ–¹å¼ HTTP è¯·æ±‚ï¼Œå…ˆæœ¬åœ°æ„å»ºæ¥å— HTTP è¯·æ±‚çš„äº§å“æ§åˆ¶å™¨ï¼Œæ–°å»ºåŒ… <code>com.one.learn.resttemplate.controller</code>,æ–°å»ºäº§å“ Controller <code>ProductController</code> , ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@RequestMapping(&quot;/product&quot;)</span>
<span class="hljs-meta">@RestController</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ProductController</span> </span>&#123;

    <span class="hljs-meta">@GetMapping(&quot;/get_product1&quot;)</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Product <span class="hljs-title">get_product1</span><span class="hljs-params">()</span> </span>&#123;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Product(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;ProductA&quot;</span>, BigDecimal.valueOf(<span class="hljs-number">6666.0</span>));
    &#125;

    <span class="hljs-meta">@GetMapping(&quot;/get_product2&quot;)</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> Product <span class="hljs-title">get_product2</span><span class="hljs-params">(Integer id)</span> </span>&#123;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Product(id, <span class="hljs-string">&quot;ProductC&quot;</span>, BigDecimal.valueOf(<span class="hljs-number">6666.0</span>));
    &#125;

    <span class="hljs-meta">@GetMapping(&quot;/get_product3&quot;)</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">get_product3</span><span class="hljs-params">(Product product)</span> </span>&#123;
        <span class="hljs-keyword">return</span> product.toString();
    &#125;


    <span class="hljs-meta">@PostMapping(&quot;/post_product1&quot;)</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">post_product1</span><span class="hljs-params">(Product product)</span> </span>&#123;
        <span class="hljs-keyword">return</span> product.toString();
    &#125;

    <span class="hljs-meta">@PostMapping(&quot;/post_product2&quot;)</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">post_product2</span><span class="hljs-params">(<span class="hljs-meta">@RequestBody</span> Product product)</span> </span>&#123;
        <span class="hljs-keyword">return</span> product.toString();
    &#125;

    <span class="hljs-meta">@DeleteMapping(&quot;/delete/&#123;id&#125;&quot;)</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">delete</span><span class="hljs-params">(<span class="hljs-meta">@PathVariable</span> Integer id)</span> </span>&#123;
        String result = String.format(<span class="hljs-string">&quot;ç¼–å·ä¸º%sçš„äº§å“åˆ é™¤æˆåŠŸ&quot;</span>, id);
        System.out.println(result);
        <span class="hljs-keyword">return</span> result;
    &#125;

    <span class="hljs-meta">@PutMapping(&quot;/update&quot;)</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">updateByPut</span><span class="hljs-params">(Product product)</span> </span>&#123;
        String result = product.toString() + <span class="hljs-string">&quot; æ›´æ–°æˆåŠŸ&quot;</span>;
        System.out.println(result);
        <span class="hljs-keyword">return</span> result;
    &#125;

    <span class="hljs-meta">@PostMapping(&quot;/upload&quot;)</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">upload</span><span class="hljs-params">(MultipartRequest request)</span> </span>&#123;
 	       <span class="hljs-comment">// Spring MVC ä½¿ç”¨ MultipartRequest æ¥å—å¸¦æ–‡ä»¶çš„ HTTP è¯·æ±‚</span>
        MultipartFile file = request.getFile(<span class="hljs-string">&quot;file&quot;</span>); 
        String originalFilename = file.getOriginalFilename();
        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;upload success filename: &quot;</span> + originalFilename;
    &#125;
&#125;
</code></pre></div>

<p>åœ¨<code>Product</code> æ§åˆ¶å™¨ä¸­æ¶‰åŠçš„å®ä½“ç±» <code>Product</code> åˆ›å»ºåœ¨ <code>com.one.learn.resttemplate.bean</code> åŒ…ä¸‹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Product</span> </span>&#123;
    <span class="hljs-keyword">private</span> Integer id;
    <span class="hljs-keyword">private</span> String name;
    <span class="hljs-keyword">private</span> BigDecimal price;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Product</span><span class="hljs-params">()</span> </span>&#123;
    &#125;
    
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Product</span><span class="hljs-params">(Integer id, String name, BigDecimal price)</span> </span>&#123;
        <span class="hljs-keyword">this</span>.id = id;
        <span class="hljs-keyword">this</span>.name = name;
        <span class="hljs-keyword">this</span>.price = price;
    &#125;

			    <span class="hljs-comment">// çœå» setter getter æ–¹æ³•</span>
	
    <span class="hljs-meta">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;
        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Product&#123;&quot;</span> +
                <span class="hljs-string">&quot;id=&#x27;&quot;</span> + id + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +
                <span class="hljs-string">&quot;, name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +
                <span class="hljs-string">&quot;, price=&#x27;&quot;</span> + price + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +
                <span class="hljs-string">&#x27;&#125;&#x27;</span>;
    &#125;
&#125;
</code></pre></div>

<p>æœ‰äº†è¿™äº›ç±»ï¼Œå°±å¯ä»¥åˆ©ç”¨ç¨‹åºå¼•å¯¼ç±» <code>ResttemplateApplication</code> å¯åŠ¨ Spring Boot é¡¹ç›®ï¼Œä¸€ä¸ªç®€å•çš„ Web åº”ç”¨å°±è¯ç”Ÿäº†,ç›‘å¬ 8080 ç«¯å£ï¼Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="/img/springrest/4.jpg" srcset="/img/loading.gif" lazyload alt="é¡¹ç›®å¯åŠ¨"></p>
<p>æˆ‘ä»¬å¯ä»¥ç®€å•æµ‹è¯•ä¸€ä¸‹ï¼Œæ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® <code>http://localhost:8080/product/get_product1</code>ï¼Œä¼šçœ‹åˆ°å¦‚å›¾æ‰€ç¤ºçš„ç»“æœï¼š</p>
<p><img src="/img/springrest/5.jpg" srcset="/img/loading.gif" lazyload alt="é¡¹ç›®è®¿é—®"></p>
<h3 id="3-ç¼–å†™æµ‹è¯•ç±»ç”¨-RestTemplate-å‘é€-HTTP-è¯·æ±‚"><a href="#3-ç¼–å†™æµ‹è¯•ç±»ç”¨-RestTemplate-å‘é€-HTTP-è¯·æ±‚" class="headerlink" title="3. ç¼–å†™æµ‹è¯•ç±»ç”¨ RestTemplate å‘é€ HTTP è¯·æ±‚"></a>3. ç¼–å†™æµ‹è¯•ç±»ç”¨ RestTemplate å‘é€ HTTP è¯·æ±‚</h3><p>æœ‰äº† Web æœåŠ¡ï¼Œæ¥ä¸‹æ¥è¯¥ä½¿ç”¨ <code>RestTemplate</code> æ¥å‘é€è¯·æ±‚å¹¶å¤„ç†å“åº”äº†ã€‚æˆ‘ä»¬åœ¨ <code>test</code> æ–‡ä»¶ä¸‹æ–°å»ºä¸€ä¸ªæµ‹è¯•ç±» <code>com.one.learn.resttemplate.RestTemplateTests</code>,ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RestTemplateTests</span> </span>&#123;
    RestTemplate restTemplate = <span class="hljs-keyword">null</span>;

    <span class="hljs-meta">@Before</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setup</span><span class="hljs-params">()</span> </span>&#123;
        restTemplate = <span class="hljs-keyword">new</span> RestTemplate();
    &#125;
    
&#125;
</code></pre></div>

<p>è¿™é‡Œæˆ‘ä»¬é€šè¿‡ç¼–å†™æµ‹è¯•æ–¹æ³•æ¥ç”¨ <code>RestTemplate</code> API å®ç°å¯¹ <code>Product</code> æ§åˆ¶å™¨å„ä¸ªæ¥å£çš„è¯·æ±‚ã€‚</p>
<h4 id="GET-è¯·æ±‚"><a href="#GET-è¯·æ±‚" class="headerlink" title="GET è¯·æ±‚"></a>GET è¯·æ±‚</h4><p>æˆ‘ä»¬å…ˆæœ€ç®€å•çš„ä¸‹æ‰‹ï¼Œå°è¯•ç”¨ <code>RestTemplate</code> è®¿é—®è¯·æ±‚è·¯å¾„ä¸º <code>product/get_product1</code>, ä¸€ä¸ªä¸å¸¦ä»»ä½•å‚æ•° çš„ GET è¯·æ±‚ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testGet_product1</span><span class="hljs-params">()</span> </span>&#123;
   String url = <span class="hljs-string">&quot;http://localhost:8080/product/get_product1&quot;</span>;
   <span class="hljs-comment">//æ–¹å¼ä¸€ï¼šGET æ–¹å¼è·å– JSON ä¸²æ•°æ®</span>
   String result = restTemplate.getForObject(url, String.class);
   System.out.println(<span class="hljs-string">&quot;get_product1è¿”å›ç»“æœï¼š&quot;</span> + result);
   Assert.hasText(result, <span class="hljs-string">&quot;get_product1è¿”å›ç»“æœä¸ºç©º&quot;</span>);
	
	   <span class="hljs-comment">//æ–¹å¼äºŒï¼šGET æ–¹å¼è·å– JSON æ•°æ®æ˜ å°„åçš„ Product å®ä½“å¯¹è±¡</span>
   Product product = restTemplate.getForObject(url, Product.class);
   System.out.println(<span class="hljs-string">&quot;get_product1è¿”å›ç»“æœï¼š&quot;</span> + product);
   Assert.notNull(product, <span class="hljs-string">&quot;get_product1è¿”å›ç»“æœä¸ºç©º&quot;</span>);
	
	   <span class="hljs-comment">//æ–¹å¼ä¸‰ï¼šGET æ–¹å¼è·å–åŒ…å« Product å®ä½“å¯¹è±¡ çš„å“åº”å®ä½“ ResponseEntity å¯¹è±¡,ç”¨ getBody() è·å–</span>
   ResponseEntity&lt;Product&gt; responseEntity = restTemplate.getForEntity(url, Product.class);
   System.out.println(<span class="hljs-string">&quot;get_product1è¿”å›ç»“æœï¼š&quot;</span> + responseEntity);
   Assert.isTrue(responseEntity.getStatusCode().equals(HttpStatus.OK), <span class="hljs-string">&quot;get_product1å“åº”ä¸æˆåŠŸ&quot;</span>);
   
&#125;
</code></pre></div>

<p>é¦–å…ˆçœ‹ä¸‹è¿è¡Œæµ‹è¯•æ–¹æ³• <code>testGet_product1</code> åæ§åˆ¶å°çš„è¾“å‡ºæ—¥å¿—ï¼š</p>
<div class="hljs code-wrapper"><pre><code class="hljs java">...
get_product1è¿”å›ç»“æœï¼š&#123;<span class="hljs-string">&quot;id&quot;</span>:<span class="hljs-number">1</span>,<span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;ProductA&quot;</span>,<span class="hljs-string">&quot;price&quot;</span>:<span class="hljs-number">6666.0</span>&#125;
...
get_product1è¿”å›ç»“æœï¼šProduct&#123;id=<span class="hljs-string">&#x27;1&#x27;</span>, name=<span class="hljs-string">&#x27;ProductA&#x27;</span>, price=<span class="hljs-string">&#x27;6666.0&#x27;</span>&#125;
...
get_product1è¿”å›ç»“æœï¼š&lt;<span class="hljs-number">200</span>,Product&#123;id=<span class="hljs-string">&#x27;1&#x27;</span>, name=<span class="hljs-string">&#x27;ProductA&#x27;</span>, price=<span class="hljs-string">&#x27;6666.0&#x27;</span>&#125;,[Content-Type:<span class="hljs-string">&quot;application/json;charset=UTF-8&quot;</span>, Transfer-Encoding:<span class="hljs-string">&quot;chunked&quot;</span>, Date:<span class="hljs-string">&quot;Thu, 09 May 2019 15:37:25 GMT&quot;</span>]&gt;
...
</code></pre></div>

<p>å¯ä»¥çœ‹åˆ° <code>testGet_product1</code> è¯·æ±‚éƒ½æ˜¯æˆåŠŸå“åº”å¹¶è·å–åˆ°äº†æ•°æ®ï¼Œä»ä¸Šé¢ä»£ç ä¸Šçœ‹æ˜¯ä¸æ˜¯å¾ˆç®€å•ã€‚ç°åœ¨æ¥ç‚¹ç•¥å¤æ‚çš„è¯·æ±‚æ–¹å¼ï¼Œä½¿ç”¨ <code>RestTemplate</code> API ä¸­ <code>exchange</code> å’Œ <code>execute</code> æ–¹æ³•å‘é€ GET è¯·æ±‚ï¼Œå¯ä»¥æ›´åŠ ç»†ç²’åº¦æ§åˆ¶è¯·æ±‚çš„è¡Œä¸ºï¼Œå¦‚ <code>Header</code> ä¿¡æ¯ï¼Œæ•°æ®å¤„ç†æ–¹å¼ç­‰,åŒæ ·åœ¨ <code>testGet_product1</code> æ–¹æ³•é‡Œæ·»åŠ ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testGet_product1</span><span class="hljs-params">()</span> </span>&#123;
    String url = <span class="hljs-string">&quot;http://localhost:8080/product/get_product1&quot;</span>;
    <span class="hljs-comment">//....</span>
    
    <span class="hljs-comment">//æ–¹å¼ä¸€ï¼š æ„å»ºè¯·æ±‚å®ä½“ HttpEntity å¯¹è±¡ï¼Œç”¨äºé…ç½® Header ä¿¡æ¯å’Œè¯·æ±‚å‚æ•°</span>
    MultiValueMap header = <span class="hljs-keyword">new</span> LinkedMultiValueMap();
    header.add(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE);
    HttpEntity&lt;Object&gt; requestEntity = <span class="hljs-keyword">new</span> HttpEntity&lt;&gt;(header);
    <span class="hljs-comment">//æ–¹å¼äºŒï¼š æ‰§è¡Œè¯·æ±‚è·å–åŒ…å« Product å®ä½“å¯¹è±¡ çš„å“åº”å®ä½“ ResponseEntity å¯¹è±¡,ç”¨ getBody() è·å–</span>
    ResponseEntity&lt;Product&gt; exchangeResult = restTemplate.exchange(url, HttpMethod.GET, requestEntity, Product.class);
    System.out.println(<span class="hljs-string">&quot;get_product1è¿”å›ç»“æœï¼š&quot;</span> + exchangeResult);
    Assert.isTrue(exchangeResult.getStatusCode().equals(HttpStatus.OK), <span class="hljs-string">&quot;get_product1å“åº”ä¸æˆåŠŸ&quot;</span>);

    	<span class="hljs-comment">//æ–¹å¼ä¸‰ï¼š æ ¹æ® RequestCallback æ¥å£å®ç°ç±»è®¾ç½®Headerä¿¡æ¯,ç”¨ ResponseExtractor æ¥å£å®ç°ç±»è¯»å–å“åº”æ•°æ®</span>
    String executeResult = restTemplate.execute(url, HttpMethod.GET, request -&gt; &#123;
        request.getHeaders().add(HttpHeaders.CONTENT_TYPE, MediaType.APPLICATION_JSON_VALUE);
    &#125;, (clientHttpResponse) -&gt; &#123;
        InputStream body = clientHttpResponse.getBody();
        <span class="hljs-keyword">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-keyword">byte</span>[body.available()];
        body.read(bytes);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> String(bytes);
    &#125;); <span class="hljs-comment">// å¤‡æ³¨ï¼šè¿™é‡Œä½¿ç”¨äº† Java8 ç‰¹æ€§ï¼šLambda è¡¨è¾¾å¼è¯­æ³•ï¼Œè‹¥æœªæ¥è§¦ Lambda è¡¨è¾¾å¼åå¯ä»¥ä½¿ç”¨åŒ¿åå†…éƒ¨ç±»ä»£æ›¿å®ç°</span>
    System.out.println(<span class="hljs-string">&quot;get_product1è¿”å›ç»“æœï¼š&quot;</span> + executeResult);
    Assert.hasText(executeResult, <span class="hljs-string">&quot;get_product1è¿”å›ç»“æœä¸ºç©º&quot;</span>);
&#125;
</code></pre></div>

<p>åŒæ ·å†è¿è¡Œæµ‹è¯•æ–¹æ³• <code>testGet_product1</code> åæ§åˆ¶å°çš„è¾“å‡ºæ—¥å¿—ï¼š</p>
<div class="hljs code-wrapper"><pre><code class="hljs java">...
get_product1è¿”å›ç»“æœï¼š&lt;<span class="hljs-number">200</span>,Product&#123;id=<span class="hljs-string">&#x27;1&#x27;</span>, name=<span class="hljs-string">&#x27;ProductA&#x27;</span>, price=<span class="hljs-string">&#x27;6666.0&#x27;</span>&#125;,[Content-Type:<span class="hljs-string">&quot;application/json;charset=UTF-8&quot;</span>, Transfer-Encoding:<span class="hljs-string">&quot;chunked&quot;</span>, Date:<span class="hljs-string">&quot;Thu, 09 May 2019 16:00:22 GMT&quot;</span>]&gt;
...
get_product1è¿”å›ç»“æœï¼š&#123;<span class="hljs-string">&quot;id&quot;</span>:<span class="hljs-number">1</span>,<span class="hljs-string">&quot;name&quot;</span>:<span class="hljs-string">&quot;ProductA&quot;</span>,<span class="hljs-string">&quot;price&quot;</span>:<span class="hljs-number">6666.0</span>&#125;
...
</code></pre></div>

<p>ç»“æœä¹Ÿéƒ½æ˜¯æ­£å¸¸è¿”å›ï¼Œè¯´æ˜æ‰§è¡Œçš„è¯·æ±‚éƒ½æ˜¯æ­£ç¡®çš„ã€‚</p>
<p>ç°åœ¨æ¥å°è¯•æ‰§è¡Œå¸¦æœ‰å‚æ•°çš„ GET è¯·æ±‚ï¼ŒåŒæ ·çš„æ–¹å¼ç¼–å†™ä¸€ä¸ªæ–°çš„æµ‹è¯•æ–¹æ³•ï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testGet_product2</span><span class="hljs-params">()</span> </span>&#123;
    String url = <span class="hljs-string">&quot;http://localhost:8080/product/get_product2/id=&#123;id&#125;&quot;</span>;
	
	    <span class="hljs-comment">//æ–¹å¼ä¸€ï¼šå°†å‚æ•°çš„å€¼å­˜åœ¨å¯å˜é•¿åº¦å‚æ•°é‡Œï¼ŒæŒ‰ç…§é¡ºåºè¿›è¡Œå‚æ•°åŒ¹é…</span>
    ResponseEntity&lt;Product&gt; responseEntity = restTemplate.getForEntity(url, Product.class, <span class="hljs-number">101</span>);
    System.out.println(responseEntity);
    Assert.isTrue(responseEntity.getStatusCode().equals(HttpStatus.OK), <span class="hljs-string">&quot;get_product2 è¯·æ±‚ä¸æˆåŠŸ&quot;</span>);
    Assert.notNull(responseEntity.getBody().getId(), <span class="hljs-string">&quot;get_product2  ä¼ é€’å‚æ•°ä¸æˆåŠŸ&quot;</span>);

	    <span class="hljs-comment">//æ–¹å¼äºŒï¼šå°†è¯·æ±‚å‚æ•°ä»¥é”®å€¼å¯¹å½¢å¼å­˜å‚¨åˆ° Map é›†åˆä¸­ï¼Œç”¨äºè¯·æ±‚æ—¶URLä¸Šçš„æ‹¼æ¥</span>
    Map&lt;String, Object&gt; uriVariables = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
    uriVariables.put(<span class="hljs-string">&quot;id&quot;</span>, <span class="hljs-number">101</span>);
    Product result = restTemplate.getForObject(url, Product.class, uriVariables);
    System.out.println(result);
    Assert.notNull(result.getId(), <span class="hljs-string">&quot;get_product2  ä¼ é€’å‚æ•°ä¸æˆåŠŸ&quot;</span>);
&#125;
</code></pre></div>

<p>æ­£å¸¸è¿è¡Œç»“æœå¦‚ä¸‹ï¼š</p>
<div class="hljs code-wrapper"><pre><code class="hljs java">...
&lt;<span class="hljs-number">200</span>,Product&#123;id=<span class="hljs-string">&#x27;101&#x27;</span>, name=<span class="hljs-string">&#x27;ProductC&#x27;</span>, price=<span class="hljs-string">&#x27;6666.0&#x27;</span>&#125;,[Content-Type:<span class="hljs-string">&quot;application/json;charset=UTF-8&quot;</span>, Transfer-Encoding:<span class="hljs-string">&quot;chunked&quot;</span>, Date:<span class="hljs-string">&quot;Fri, 10 May 2019 14:53:41 GMT&quot;</span>]&gt;
...
Product&#123;id=<span class="hljs-string">&#x27;101&#x27;</span>, name=<span class="hljs-string">&#x27;ProductC&#x27;</span>, price=<span class="hljs-string">&#x27;6666.0&#x27;</span>&#125;
...
</code></pre></div>

<h4 id="POST-è¯·æ±‚"><a href="#POST-è¯·æ±‚" class="headerlink" title="POST è¯·æ±‚"></a>POST è¯·æ±‚</h4><p>äº†è§£å®Œå¦‚ä½•ç”¨ <code>RestTemplate</code> API å‘é€ GET è¯·æ±‚åï¼Œå†çœ‹ä¸‹å¹³æ—¶ä¹Ÿå¾ˆå¸¸è§çš„ POST è¯·æ±‚å¦‚ä½•ä½¿ç”¨ã€‚ç”±äº POST è¯·æ±‚æ•°æ®çš„å†…å®¹ç±»å‹ <code>Content-Type</code> ä¸åŒï¼Œå‘é€ POST è¯·æ±‚æƒ…å†µç›¸å¯¹å°±å¤šäº†ï¼Œæˆ‘ä»¬è¿™é‡Œä»¥å¸¸ç”¨çš„ <code>application/x-www-form-urlencoded</code> å’Œ <code>application/json</code> è¿™ä¸¤ç§å†…å®¹ç±»å‹ä¸ºä¾‹å­ã€‚</p>
<ul>
<li><p>å‘é€ <code>Content-Type</code> ä¸º <code>application/x-www-form-urlencoded</code> çš„ POST è¯·æ±‚ï¼š</p>
<div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testPost_product1</span><span class="hljs-params">()</span> </span>&#123;
    String url = <span class="hljs-string">&quot;http://localhost:8080/product/post_product1&quot;</span>;
	Product product = <span class="hljs-keyword">new</span> Product(<span class="hljs-number">201</span>, <span class="hljs-string">&quot;Macbook&quot;</span>, BigDecimal.valueOf(<span class="hljs-number">10000</span>));
	  <span class="hljs-comment">// è®¾ç½®è¯·æ±‚çš„ Content-Type ä¸º application/x-www-form-urlencoded</span>
    MultiValueMap&lt;String, String&gt; header = <span class="hljs-keyword">new</span> LinkedMultiValueMap();
    header.add(HttpHeaders.CONTENT_TYPE, (MediaType.APPLICATION_FORM_URLENCODED_VALUE));
    
    <span class="hljs-comment">//æ–¹å¼äºŒï¼š å°†è¯·æ±‚å‚æ•°å€¼ä»¥ K=V æ–¹å¼ç”¨ &amp; æ‹¼æ¥ï¼Œå‘é€è¯·æ±‚ä½¿ç”¨</span>
    String productStr = <span class="hljs-string">&quot;id=&quot;</span> + product.getId() + <span class="hljs-string">&quot;&amp;name=&quot;</span> + product.getName() + <span class="hljs-string">&quot;&amp;price=&quot;</span> + product.getPrice();
    HttpEntity&lt;String&gt; request = <span class="hljs-keyword">new</span> HttpEntity&lt;&gt;(productStr, header);
    ResponseEntity&lt;String&gt; exchangeResult = restTemplate.exchange(url, HttpMethod.POST, request, String.class);
    System.out.println(<span class="hljs-string">&quot;post_product1: &quot;</span> + exchangeResult);
    Assert.isTrue(exchangeResult.getStatusCode().equals(HttpStatus.OK), <span class="hljs-string">&quot;post_product1 è¯·æ±‚ä¸æˆåŠŸ&quot;</span>);

    <span class="hljs-comment">//æ–¹å¼ä¸€ï¼š å°†è¯·æ±‚å‚æ•°ä»¥é”®å€¼å¯¹å½¢å¼å­˜å‚¨åœ¨ MultiValueMap é›†åˆï¼Œå‘é€è¯·æ±‚æ—¶ä½¿ç”¨</span>
    MultiValueMap&lt;String, Object&gt; map = <span class="hljs-keyword">new</span> LinkedMultiValueMap();
    map.add(<span class="hljs-string">&quot;id&quot;</span>, (product.getId()));
    map.add(<span class="hljs-string">&quot;name&quot;</span>, (product.getName()));
    map.add(<span class="hljs-string">&quot;price&quot;</span>, (product.getPrice()));
    HttpEntity&lt;MultiValueMap&gt; request2 = <span class="hljs-keyword">new</span> HttpEntity&lt;&gt;(map, header);
    ResponseEntity&lt;String&gt; exchangeResult2 = restTemplate.exchange(url, HttpMethod.POST, request2, String.class);
    System.out.println(<span class="hljs-string">&quot;post_product1ï¼š &quot;</span> + exchangeResult2);
    Assert.isTrue(exchangeResult.getStatusCode().equals(HttpStatus.OK), <span class="hljs-string">&quot;post_product1 è¯·æ±‚ä¸æˆåŠŸ&quot;</span>);
&#125;
</code></pre></div>

<p>å¯¹åº”çš„è¾“å‡ºæ—¥å¿—å¦‚ä¸‹ï¼š</p>
<div class="hljs code-wrapper"><pre><code class="hljs java">...
post_product1: &lt;<span class="hljs-number">200</span>,Product&#123;id=<span class="hljs-string">&#x27;201&#x27;</span>, name=<span class="hljs-string">&#x27;Macbook&#x27;</span>, price=<span class="hljs-string">&#x27;10000&#x27;</span>&#125;,[Content-Type:<span class="hljs-string">&quot;text/plain;charset=UTF-8&quot;</span>, Content-Length:<span class="hljs-string">&quot;48&quot;</span>, Date:<span class="hljs-string">&quot;Fri, 10 May 2019 16:07:43 GMT&quot;</span>]&gt;
...
post_product1ï¼š &lt;<span class="hljs-number">200</span>,Product&#123;id=<span class="hljs-string">&#x27;201&#x27;</span>, name=<span class="hljs-string">&#x27;Macbook&#x27;</span>, price=<span class="hljs-string">&#x27;10000&#x27;</span>&#125;,[Content-Type:<span class="hljs-string">&quot;text/plain;charset=UTF-8&quot;</span>, Content-Length:<span class="hljs-string">&quot;48&quot;</span>, Date:<span class="hljs-string">&quot;Fri, 10 May 2019 16:07:43 GMT&quot;</span>]&gt;
</code></pre></div></li>
<li><p>å‘é€ <code>Content-Type</code> ä¸º <code>application/json</code> çš„ POST è¯·æ±‚ï¼š</p>
<div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testPost_product2</span><span class="hljs-params">()</span> </span>&#123;
    String url = <span class="hljs-string">&quot;http://localhost:8080/product/post_product2&quot;</span>;
    
   	<span class="hljs-comment">// è®¾ç½®è¯·æ±‚çš„ Content-Type ä¸º application/json</span>
    MultiValueMap&lt;String, String&gt; header = <span class="hljs-keyword">new</span> LinkedMultiValueMap();
    header.put(HttpHeaders.CONTENT_TYPE, Arrays.asList(MediaType.APPLICATION_JSON_VALUE));
    <span class="hljs-comment">// è®¾ç½® Accept å‘æœåŠ¡å™¨è¡¨æ˜å®¢æˆ·ç«¯å¯å¤„ç†çš„å†…å®¹ç±»å‹</span>
    header.put(HttpHeaders.ACCEPT, Arrays.asList(MediaType.APPLICATION_JSON_VALUE));
    <span class="hljs-comment">// ç›´æ¥å°†å®ä½“ Product ä½œä¸ºè¯·æ±‚å‚æ•°ä¼ å…¥ï¼Œåº•å±‚åˆ©ç”¨ Jackson æ¡†æ¶åºåˆ—åŒ–æˆ JSON ä¸²å‘é€è¯·æ±‚</span>
    HttpEntity&lt;Product&gt; request = <span class="hljs-keyword">new</span> HttpEntity&lt;&gt;(<span class="hljs-keyword">new</span> Product(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;Macbook&quot;</span>, BigDecimal.valueOf(<span class="hljs-number">10000</span>)), header);
    ResponseEntity&lt;String&gt; exchangeResult = restTemplate.exchange(url, HttpMethod.POST, request, String.class);
    System.out.println(<span class="hljs-string">&quot;post_product2: &quot;</span> + exchangeResult);
    Assert.isTrue(exchangeResult.getStatusCode().equals(HttpStatus.OK), <span class="hljs-string">&quot;post_product2 è¯·æ±‚ä¸æˆåŠŸ&quot;</span>);
&#125;
</code></pre></div>

<p>éªŒè¯çš„è¾“å‡ºæ—¥å¿—å¦‚ä¸‹ï¼š</p>
<div class="hljs code-wrapper"><pre><code class="hljs java">Â·Â·Â·
post_product2: &lt;<span class="hljs-number">200</span>,Product&#123;id=<span class="hljs-string">&#x27;2&#x27;</span>, name=<span class="hljs-string">&#x27;Macbook&#x27;</span>, price=<span class="hljs-string">&#x27;10000&#x27;</span>&#125;,[Content-Type:<span class="hljs-string">&quot;application/json;charset=UTF-8&quot;</span>, Content-Length:<span class="hljs-string">&quot;46&quot;</span>, Date:<span class="hljs-string">&quot;Fri, 10 May 2019 16:09:11 GMT&quot;</span>]&gt;
Â·Â·Â·
</code></pre></div></li>
</ul>
<h4 id="DELETE-è¯·æ±‚-å’Œ-PUT-è¯·æ±‚"><a href="#DELETE-è¯·æ±‚-å’Œ-PUT-è¯·æ±‚" class="headerlink" title="DELETE è¯·æ±‚ å’Œ PUT è¯·æ±‚"></a>DELETE è¯·æ±‚ å’Œ PUT è¯·æ±‚</h4><p>DELETE è¯·æ±‚å’Œ PUT è¯·æ±‚å±äº RESTful è¯·æ±‚æ–¹å¼çš„ä¸¤ç§ï¼Œä½†é€šå¸¸ä¸ä¼šè¢«ä½¿ç”¨åˆ°ï¼Œè¿™é‡Œä¹Ÿåªæ˜¯ç®€å•æ¼”ç¤ºä¸‹ï¼Œå…·ä½“ä»£ç å¦‚ä¸‹ï¼š</p>
<div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// DELETE æ–¹æ³•è¯·æ±‚</span>
<span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testDelete</span><span class="hljs-params">()</span> </span>&#123;
   String url = <span class="hljs-string">&quot;http://localhost:8080/product/delete/&#123;id&#125;&quot;</span>;
   restTemplate.delete(url, <span class="hljs-number">101</span>);
&#125;

<span class="hljs-comment">// PUT æ–¹æ³•è¯·æ±‚</span>
<span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testPut</span><span class="hljs-params">()</span> </span>&#123;
    String url = <span class="hljs-string">&quot;http://localhost:8080/product/update&quot;</span>;
    Map&lt;String, ?&gt; variables = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();
    MultiValueMap&lt;String, String&gt; header = <span class="hljs-keyword">new</span> LinkedMultiValueMap();
    header.put(HttpHeaders.CONTENT_TYPE, Arrays.asList(MediaType.APPLICATION_FORM_URLENCODED_VALUE));
    Product product = <span class="hljs-keyword">new</span> Product(<span class="hljs-number">101</span>, <span class="hljs-string">&quot;iWatch&quot;</span>, BigDecimal.valueOf(<span class="hljs-number">2333</span>));
    String productStr = <span class="hljs-string">&quot;id=&quot;</span> + product.getId() + <span class="hljs-string">&quot;&amp;name=&quot;</span> + product.getName() + <span class="hljs-string">&quot;&amp;price=&quot;</span> + product.getPrice();
    HttpEntity&lt;String&gt; request = <span class="hljs-keyword">new</span> HttpEntity&lt;&gt;(productStr, header);
    restTemplate.put(url, request);
&#125;
</code></pre></div>

<h3 id="ä¸Šä¼ æ–‡ä»¶"><a href="#ä¸Šä¼ æ–‡ä»¶" class="headerlink" title="ä¸Šä¼ æ–‡ä»¶"></a>ä¸Šä¼ æ–‡ä»¶</h3><p>ç°åœ¨æˆ‘ä»¬å†è¯•ä¸‹å¦‚ä½•ä½¿ç”¨ <code>RestTemplate</code> API è¿›è¡Œæ–‡ä»¶ä¸Šä¼ ,ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œé¦–å…ˆçœ‹ä¸‹å®ç°ä»£ç :</p>
<div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Test</span>
<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">testUploadFile</span><span class="hljs-params">()</span> </span>&#123;
    String url = <span class="hljs-string">&quot;http://localhost:8080/product/upload&quot;</span>;
    MultiValueMap&lt;String, Object&gt; body = <span class="hljs-keyword">new</span> LinkedMultiValueMap&lt;&gt;();
    FileSystemResource file = <span class="hljs-keyword">new</span> FileSystemResource(<span class="hljs-keyword">new</span> File(<span class="hljs-string">&quot;/Users/One/Desktop/b.txt&quot;</span>));
    body.add(<span class="hljs-string">&quot;file&quot;</span>, file);

    MultiValueMap&lt;String, String&gt; header = <span class="hljs-keyword">new</span> LinkedMultiValueMap();
    header.put(HttpHeaders.CONTENT_TYPE, Arrays.asList(MediaType.MULTIPART_FORM_DATA_VALUE));
    HttpEntity&lt;MultiValueMap&lt;String, Object&gt;&gt; requestEntity = <span class="hljs-keyword">new</span> HttpEntity&lt;&gt;(body, header);
    ResponseEntity&lt;String&gt; responseEntity = restTemplate.postForEntity(url, requestEntity, String.class);
    System.out.println(<span class="hljs-string">&quot;upload: &quot;</span> + responseEntity);
    Assert.isTrue(responseEntity.getStatusCode().equals(HttpStatus.OK), <span class="hljs-string">&quot;upload è¯·æ±‚ä¸æˆåŠŸ&quot;</span>);
&#125;
</code></pre></div>

<p>å¦‚æœéœ€è¦ä¸Šä¼ æ–‡ä»¶ç±»å‹æ•°æ®ï¼Œå°±åªèƒ½ä½¿ç”¨ POST è¯·æ±‚ï¼Œå¹¶ä¸”å†…å®¹ç±»å‹ä¸º <code>multipart/form-data</code>,éœ€è¦æ‰‹åŠ¨ç»™ <code>Header</code> æŒ‡å®šè¿™ä¸ª <code>Content-Type</code>ã€‚è€Œéœ€è¦ä¸Šä¼ çš„æ–‡ä»¶å¯ä»¥ç”¨ <code>FileSystemResource</code> å¯¹è±¡å°è£…ï¼Œè¡¨ç¤ºäº†ä¸€ä¸ªæ–‡ä»¶èµ„æºï¼ŒåŒæ—¶æœåŠ¡ç«¯éœ€è¦ç”¨ <code>MultipartRequest</code> å¯¹è±¡æ¥è·å–æ–‡ä»¶æ•°æ®ã€‚ç»“åˆå·²è¿è¡Œçš„ Web æœåŠ¡ï¼Œè¿è¡Œä¸Šè¿°æµ‹è¯•æ–¹æ³•å³å¯å¾—åˆ°ä¸‹é¢æ—¥å¿—è¾“å‡º:</p>
<div class="hljs code-wrapper"><pre><code class="hljs java">...
upload: &lt;<span class="hljs-number">200</span>,upload success filename: b.txt,[Content-Type:<span class="hljs-string">&quot;text/plain;charset=UTF-8&quot;</span>, Content-Length:<span class="hljs-string">&quot;30&quot;</span>, Date:<span class="hljs-string">&quot;Fri, 10 May 2019 17:00:45 GMT&quot;</span>]&gt;
...
</code></pre></div>

<h2 id="è¿›é˜¶-RestTemplate"><a href="#è¿›é˜¶-RestTemplate" class="headerlink" title="è¿›é˜¶ RestTemplate"></a>è¿›é˜¶ RestTemplate</h2><p>åˆ°è¿™é‡Œæˆ‘ä»¬å°±å­¦ä¹ äº† <code>RestTemplate</code> API è¯·æ±‚æ•°æ®çš„å‡ ç§å¸¸è§æ–¹å¼ï¼Œç°åœ¨æ¥è¿›ä¸€æ­¥åœ°æ·±å…¥ä½¿ç”¨ <code>RestTemplate</code>ã€‚</p>
<h3 id="åº•å±‚-HTTP-è¯·æ±‚åº“åˆ‡æ¢"><a href="#åº•å±‚-HTTP-è¯·æ±‚åº“åˆ‡æ¢" class="headerlink" title="åº•å±‚ HTTP è¯·æ±‚åº“åˆ‡æ¢"></a>åº•å±‚ HTTP è¯·æ±‚åº“åˆ‡æ¢</h3><p>æˆ‘ä»¬é¦–å…ˆçœ‹ä¸‹å®˜æ–¹æ–‡æ¡£çš„æè¿°ï¼š</p>
<blockquote>
<p>The default constructor uses java.net.HttpURLConnection to perform requests. You can switch to a different HTTP library with an implementation of ClientHttpRequestFactory. There is built-in support for the following:</p>
<ul>
<li>Apache HttpComponents</li>
<li>Netty</li>
<li>OkHttp</li>
</ul>
</blockquote>
<p>ä»ä¸Šé¢å¯ä»¥çœ‹å‡º <code>RestTemplate</code> é»˜è®¤ä½¿ç”¨ JDK åŸç”Ÿçš„ <code>java.net.HttpURLConnection</code> æ‰§è¡Œè¯·æ±‚ã€‚è€Œé™¤æ­¤ä¹‹å¤–ï¼ŒSpring è¿˜å°è£…äº† Apache HttpComponentsï¼Œ Nettyï¼Œ OkHttp ä¸‰ç§è¯·æ±‚åº“ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯æˆ‘ä»¬å¹³å¸¸ç”¨çš„ <code>HttpClient</code> API ç›¸å…³çš„åº“ï¼Œè€Œ <a target="_blank" rel="noopener" href="https://netty.io/">Netty</a> åˆ™æ˜¯ä¸€ä¸ªæ€§èƒ½é«˜çš„NIO è¯·æ±‚å¤„ç†ç½‘ç»œåº“ï¼Œ<a target="_blank" rel="noopener" href="https://square.github.io/okhttp">OkHttp</a> ä¸ºåŠŸèƒ½ä¸°å¯Œä¸”é«˜æ•ˆçš„ç½‘ç»œæ¡†æ¶ï¼Œå¤šç”¨äº Android ç¨‹åºã€‚</p>
<p>è€Œæˆ‘ä»¬ä¸Šæ–‡é‡‡ç”¨é»˜è®¤çš„æ„é€ å™¨æ–¹æ³•åˆ›å»ºçš„ <code>RestTemplate</code> å®ä¾‹ï¼Œå³é‡‡ç”¨äº† JDK åŸç”Ÿçš„ç½‘ç»œ APIã€‚æƒ³è¦åˆ‡æ¢ï¼Œåªéœ€è¦åœ¨æ„é€ æ–¹æ³•ä¸­ä¼ å…¥ç‰¹å®š <code>ClientHttpRequestFactory</code> å®ç°ç±»å³å¯,å¦‚ä¸‹ä»£ç ï¼š</p>
<div class="hljs code-wrapper"><pre><code class="hljs haxe">RestTemplate template = <span class="hljs-keyword">new</span> <span class="hljs-type">RestTemplate</span>(<span class="hljs-keyword">new</span> <span class="hljs-type">HttpComponentsClientHttpRequestFactory</span>());
</code></pre></div>

<p>æˆ‘ä»¬æŸ¥çœ‹ <code>RestTemplate</code> æºç æ‰¾ä¸åˆ°é»˜è®¤é‡‡ç”¨JDK <code>HttpURLConnection</code> API çš„ä»£ç ï¼Œé‚£å°±æ ¹æ®å‰æ–‡ç»™å‡º <code>RestTemplate</code> ç±»å±‚æ¬¡å›¾å‘ä¸ŠæŸ¥æ‰¾ï¼Œå¯ä»¥åœ¨çˆ¶ç±» <code>HttpAccessor</code> ä¸Šèƒ½æ‰¾åˆ°å¦‚ä¸‹ä»£ç ï¼š</p>
<div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HttpAccessor</span> </span>&#123;
	<span class="hljs-comment">// ...</span>
	<span class="hljs-keyword">private</span> ClientHttpRequestFactory requestFactory = <span class="hljs-keyword">new</span> SimpleClientHttpRequestFactory();
	<span class="hljs-comment">// ...</span>
&#125;
</code></pre></div>

<p>è€Œ Spring å¯¹å·¥å‚ç±» <code>SimpleClientHttpRequestFactory</code> æè¿°ä¸º: <code>implementation that uses standard JDK facilities</code>ï¼Œ ä¹Ÿæ­£è¯´æ˜äº†é»˜è®¤æ„é€  <code>RestTemplate</code> å®ä¾‹çš„è¡Œä¸ºéƒ½ä¼šç›´æ¥ä½¿ç”¨ JDK ç½‘ç»œ APIã€‚</p>
<h3 id="è¯·æ±‚è¶…æ—¶è®¾ç½®"><a href="#è¯·æ±‚è¶…æ—¶è®¾ç½®" class="headerlink" title="è¯·æ±‚è¶…æ—¶è®¾ç½®"></a>è¯·æ±‚è¶…æ—¶è®¾ç½®</h3><p>é€šå¸¸æˆ‘ä»¬ä¼šå¯¹ HTTP è¯·æ±‚ç±»è¿›è¡Œæ‰§è¡Œè¡Œä¸ºçš„å®šåˆ¶ï¼Œä¾‹å¦‚è°ƒç”¨è¶…æ—¶æ—¶é—´è®¾ç½®ï¼Œè¿æ¥æ—¶é•¿çš„é™åˆ¶ç­‰ï¼Œè€Œé‡‡ç”¨é»˜è®¤çš„ <code>HttpURLConnection</code> é»˜è®¤çš„é…ç½®æ—¶ï¼Œ ä» <code>SimpleClientHttpRequestFactory</code> æºç ç±»å¯ä»¥çœ‹åˆ°æ˜¯æ²¡æœ‰è¶…æ—¶é™åˆ¶ï¼Œä¹Ÿå°±æ„å‘³ç€æ— é™ç­‰å¾…è¯·æ±‚å“åº”ï¼š</p>
<div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// RestTemplate é»˜è®¤è¶…æ—¶è®¾ç½®</span>
...
<span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> connectTimeout = -<span class="hljs-number">1</span>;
<span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> readTimeout = -<span class="hljs-number">1</span>;
...
</code></pre></div>

<p>é‚£ä¹ˆæˆ‘ä»¬è¯¥å¦‚ä½•è°ƒæ•´è¶…æ—¶æ—¶é—´,å¯ä»¥å‚è€ƒå¦‚ä¸‹ä»£ç ï¼š</p>
<div class="hljs code-wrapper"><pre><code class="hljs java">RestTemplate customRestTemplate = <span class="hljs-keyword">new</span> RestTemplate(getClientHttpRequestFactory());

<span class="hljs-function"><span class="hljs-keyword">private</span> SimpleClientHttpRequestFactory <span class="hljs-title">getClientHttpRequestFactory</span><span class="hljs-params">()</span> </span>&#123;
    SimpleClientHttpRequestFactory clientHttpRequestFactory
            = <span class="hljs-keyword">new</span> SimpleClientHttpRequestFactory();
    <span class="hljs-comment">// è¿æ¥è¶…æ—¶è®¾ç½® 10s</span>
    clientHttpRequestFactory.setConnectTimeout(<span class="hljs-number">10_000</span>);

    <span class="hljs-comment">// è¯»å–è¶…æ—¶è®¾ç½® 10s</span>
    clientHttpRequestFactory.setReadTimeout(<span class="hljs-number">10_000</span>);
    <span class="hljs-keyword">return</span> clientHttpRequestFactory;
&#125;
</code></pre></div>

<p>å¦‚æœè¦è°ƒæ•´ <code>HttpComponentsClient</code> çš„è¶…æ—¶è®¾ç½®ï¼Œå¯ä»¥å‚è€ƒæ–‡ç« <a target="_blank" rel="noopener" href="https://howtodoinjava.com/spring-boot2/resttemplate-timeout-example/">resttemplate-timeout-example</a> ã€‚å½“ç„¶é™¤äº†javaè®¾ç½®è¶…æ—¶æ—¶é—´ä¹‹å¤–ï¼Œè¿˜æœ‰æ›´å¤šå‚æ•°è¿›è¡Œå®šåˆ¶ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€åˆ—ä¸¾ï¼Œå¯ä»¥å‚è€ƒæ–‡ç«  <a target="_blank" rel="noopener" href="https://howtodoinjava.com/spring-restful/resttemplate-httpclient-java-config/">resttemplate-httpclient-java-config</a> è¿›ä¸€æ­¥å­¦ä¹ ã€‚</p>
<p>åˆ°è¿™é‡Œæˆ‘ä»¬å¯¹ <code>RestTemplate</code> çš„å­¦ä¹ å‘Šä¸€æ®µè½ï¼Œå¦‚æœæœ‰å…´è¶£å¯ä»¥è¿›ä¸€æ­¥ç ”ç©¶ä¸‹ç›¸å…³æºç ï¼Œæœ‰æœºä¼šå°è¯•ä½¿èµ·æ¥å§ã€‚ğŸ˜</p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/java/">java</a>
                    
                      <a class="hover-with-bg" href="/categories/java/spring/">spring</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/RestTemplate/">RestTemplate</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">
                  
                    æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
                  
                </p>
              
              
                <div class="post-prevnext">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2020/11/28/other-logical-operations/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">é€»è¾‘è¿ç®—ç¬¦</span>
                        <span class="visible-mobile">Vorheriger</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/11/04/mybatis-autosql/">
                        <span class="hidden-mobile">mybatisåŠ¨æ€sql</span>
                        <span class="visible-mobile">NÃ¤chster</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments" lazyload>
                
                  
                
                
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"Jf1XC66LVfvBgBpG1uzXEivd-gzGzoHsz","appKey":"UyOEEpxFaJC2kPqgBkDOeMPE","path":"window.location.pathname","placeholder":"è¯´ç‚¹ä»€ä¹ˆ","avatar":"retro","meta":["nick","mail","link"],"requiredFields":[],"pageSize":10,"lang":"zh-CN","highlight":true,"recordIP":true,"serverURLs":"https://jf1xc66l.lc-cn-n1-shared.com","emojiCDN":null,"emojiMaps":null,"enableQQ":false,"appid":"Jf1XC66LVfvBgBpG1uzXEivd-gzGzoHsz","appkey":"UyOEEpxFaJC2kPqgBkDOeMPE"},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          Fluid.plugins.initFancyBox('#valine .vcontent img:not(.vemoji)');
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;TOC</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->

  <div class="col-lg-7 mx-auto nopadding-x-md">
    <div class="container custom post-custom mx-auto">
      <img src="https://octodex.github.com/images/jetpacktocat.png" srcset="/img/loading.gif" lazyload class="rounded mx-auto d-block mt-5" style="width:150px; height:150px;">
    </div>
  </div>


    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Suchen</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">Stichwort</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
      <div class="col-lg-7 mx-auto nopadding-x-md">
        <div class="container custom mx-auto">
          </script><script src="/js/fireworks.js"></script><script src="https://api.vvhan.com/api/snow"></script>
        </div>
      </div>
    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <i class="iconfont icon-love"></i> <a href="https://github.com/czy1024" target="_blank" rel="nofollow noopener"><span>luna</span></a> 
  </div>
  
  <div class="statistics">
    
    

    
      
        <!-- ä¸è’œå­ç»Ÿè®¡PV -->
        <span id="busuanzi_container_site_pv" style="display: none">
            æ€»è®¿é—®é‡ 
            <span id="busuanzi_value_site_pv"></span>
             æ¬¡
          </span>
      
      
        <!-- ä¸è’œå­ç»Ÿè®¡UV -->
        <span id="busuanzi_container_site_uv" style="display: none">
            æ€»è®¿å®¢æ•° 
            <span id="busuanzi_value_site_uv"></span>
             äºº
          </span>
      
    
  </div>


  

  
</footer>


  <!-- SCRIPTS -->
  
  <script  src="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":true,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js" ></script>
<script  src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  <script  src="/js/local-search.js" ></script>



  
    <script  src="/js/img-lazyload.js" ></script>
  



  



  
    <script  src="https://cdn.jsdelivr.net/npm/tocbot@4.12.0/dist/tocbot.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js" ></script>
  
  
    <script  src="https://cdn.jsdelivr.net/npm/anchor-js@4.3.0/anchor.min.js" ></script>
  
  
    <script defer src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js" ></script>
  



  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>


  <script defer src="/js/leancloud.js" ></script>



  <script  src="https://cdn.jsdelivr.net/npm/typed.js@2.0.11/lib/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>















<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ ä¿æŒåœ¨æœ€åº•éƒ¨ -->
<script  src="/js/boot.js" ></script>


</body>
</html>
